<% if @experiences.any? %>

  <div>
    <%= form_tag experiences_path, method: :get, class: "d-flex flex-column" do %>
      <% @categories.each do |category| %>
        <div class="d-flex flex-row">
          <%= check_box_tag "category[]", category%>
          <%=label_tag category%>
        </div>
        <div>
           <%= text_field_tag :location, nil, placeholder: 'Location..', class: "form-control" %>
           <%= text_field_tag :budget, nil, placeholder: 'Your budget...', class: "form-control" %>
        </div>
      <% end %>
      <%= submit_tag "filter", class: "btn btn-primary" %>
    <% end %>
  </div>


  <div class= "cards-container d-flex flex-row  flex-wrap">
    <% @experiences.each do |experience| %>
      <%= link_to experience_path(experience) do %>
        <div class= "card-experience">
          <%if experience.photos.attached?%>
            <%= cl_image_tag(experience.photos.first.key)%>
          <%else%>
            <%= image_tag 'default-image.png'%>
          <%end%>
          <div>
            <h2 class="text-capitalize"><%= link_to experience.name, experience_path(experience) %></h2>
            <p> Date: <%=experience.date.strftime("%d-%m-%Y") %>  Time: <%= experience.start_time.strftime('%H:%M') %> - <%= experience.end_time.strftime('%H:%M')%></p>
            <p><%= experience.description%></p>
            <p>Location: <%= experience.location %></p>
            <p>Host: <%= link_to experience.organisation.name, organisation_path(experience.organisation) %></p>
          <p class="card-price"><%= humanized_money_with_symbol(experience.price) %></p>
          </div>
          <div class= "category-card">
            <%= experience.category %>
          </div>
        </div>
      <%end%>
    <%end%>
  </div>
<%else%>
   <h1> No results </h1>
<%end%>


<div class="col-6 col-lg-6 my-2 pr-3">
  <div
    id="map"
    style="width: 100%;
    height: 642px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  </div>
</div>


    <div
      id="map"
      style="height: 100vh;
      position: sticky;
      top: 0;
      width: 50%;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  </div>



